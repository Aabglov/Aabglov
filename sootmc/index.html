<!DOCTYPE HTML>
<html>
<head>
	<!-- META -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<title>Secret Order of the Midnight Cage</title>

	<!-- CAGE MOVIE HELPERS -->
	<script type="text/javascript" src="movies.js"></script>
	<script>
		// Populate this week's cage Movie
		function CAGE(){
			var movie_ind = 1; // First movie index is 1 (Fast Times at Ridgemont High)
	    for(var i = 1;i < Object.keys(movies).length+1;i++){ // We iterate up to length+1 because it's possible this week's movie is the last in the list and we index at 1
	      if(!movies[i]["seen"]){
	        movie_ind = i;
	        break;
	      }
	    }
			// Parse the link from the html
			var regex = new RegExp('href=\".*\"');
			var str = regex.exec(movies[movie_ind]["link"])[0]; // Parse out the href tag from the HTML
			var link = str.slice(6,-1) // The regex will include the href=" and the ending " so we remove them here
			window.location.replace(link);
		}
	</script>

</head>
	<body onload="CAGE();">
	</body>
</html>
